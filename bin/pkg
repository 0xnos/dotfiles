#!/bin/sh

if [[ -z "$1" ]]; then
    echo "Usage: pkg <package_name>"
    exit 1
fi

PACKAGE="$1"

echo "üîç Searching for package '$PACKAGE'..."

# Check if the package is installed
if ! pacman -Qi "$PACKAGE" &>/dev/null; then
    echo "‚ùå Package '$PACKAGE' is not installed."
    exit 1
fi

echo "‚úÖ Package found!"

echo ""
echo "üì¶ Package Information:"
pacman -Qi "$PACKAGE" | grep -E "Name|Version|Installed Size|Install Date|Description"

echo ""
echo "üìÇ Installed files:"
pacman -Ql "$PACKAGE" | awk '{print $2}' | sort -u

echo ""
echo "üìå Configuration files:"
pacman -Qii "$PACKAGE" | grep "^CONFFILE" | awk '{print $2}'

echo ""
echo "üìÅ Cache location:"
CACHE_PATH=$(pacman -Qlp /var/cache/pacman/pkg/"$PACKAGE"-*.pkg.tar.zst 2>/dev/null | head -n 1)

if [[ -n "$CACHE_PATH" ]]; then
    echo "/var/cache/pacman/pkg/$PACKAGE-*.pkg.tar.zst"
else
    echo "‚ö†Ô∏è No cached package found."
fi

echo ""
echo "üîó Dependencies:"
pacman -Qi "$PACKAGE" | grep "Depends On" | cut -d ":" -f2

echo ""
echo "‚úÖ Done."
exit 0

